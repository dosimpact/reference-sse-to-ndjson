## ì›¹ ì†Œì¼“ vs Server-Sent-Events vs ë¡± í´ë§

Long Polling (ë¡± í´ë§)  
- í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì£¼ê¸°ì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ ë°ì´í„°ê°€ ìžˆëŠ”ì§€ í™•ì¸  
- ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì¼ì • ì‹œê°„ í›„ ì„œë²„ê°€ ì‘ë‹µ â†’ í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ìš”ì²­  
- HTTP ìš”ì²­ì´ ë°˜ë³µë˜ë¯€ë¡œ ë¹„íš¨ìœ¨ì  (ì˜¤ë²„í—¤ë“œ í¼)   
- ì‚¬ìš© ì‚¬ë¡€: ê°„ë‹¨í•œ ì±„íŒ…, ì•Œë¦¼ ì‹œìŠ¤í…œ  

ðŸ“Œ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?
- âœ… ì„œë²„ì—ì„œ ì‹¤ì‹œê°„ ì•Œë¦¼ì„ ë³´ë‚´ì•¼ í•˜ì§€ë§Œ WebSocket/SSEë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ ë•Œ
- âœ… HTTP ê¸°ë°˜ í™˜ê²½ì—ì„œ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ë•Œ
ðŸš¨ ë‹¨ì :
- âŒ ë¶ˆí•„ìš”í•œ ìš”ì²­ì´ ë§Žì•„ ì„œë²„ ë¶€í•˜ ì¦ê°€
- âŒ ì‹¤ì‹œê°„ì„±ì´ WebSocketë³´ë‹¤ ë–¨ì–´ì§

Server-Sent Events (SSE)  
- ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë‹¨ë°©í–¥ ìŠ¤íŠ¸ë¦¬ë° ê°€ëŠ¥
- HTTP ê¸°ë°˜ì´ë¯€ë¡œ WebSocketë³´ë‹¤ ì„¤ì •ì´ ê°„ë‹¨í•¨  
- ì—°ê²°ì´ ìžë™ìœ¼ë¡œ ìž¬ì—°ê²°ë¨  
- ì‚¬ìš© ì‚¬ë¡€: ë‰´ìŠ¤ í”¼ë“œ, ì£¼ì‹ ê°€ê²© ì—…ë°ì´íŠ¸, ì‹¤ì‹œê°„ ì•Œë¦¼  

ðŸ“Œ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?
- âœ… ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë§Œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ (ì˜ˆ: ì‹¤ì‹œê°„ ì•Œë¦¼)
- âœ… WebSocketì´ í•„ìš”í•  ì •ë„ë¡œ ë¹ˆë²ˆí•œ ë°ì´í„° ì „ì†¡ì´ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œ
ðŸš¨ ë‹¨ì :
- âŒ í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„ë¡œì˜ ë°ì´í„° ì „ì†¡ì´ ì œí•œë¨
- âŒ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥ (WebSocketë³´ë‹¤ ë²”ìš©ì„±ì´ ë–¨ì–´ì§)

WebSocket (ì›¹ì†Œì¼“)
- ì–‘ë°©í–¥ í†µì‹  ê°€ëŠ¥ (Full Duplex)
- ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì†ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìžˆìŒ
- í—¤ë”ê°€ ê°€ë²¼ì›Œ ì„±ëŠ¥ì´ ë›°ì–´ë‚¨ (HTTPë³´ë‹¤ íš¨ìœ¨ì )
- ì‚¬ìš© ì‚¬ë¡€: ì‹¤ì‹œê°„ ì±„íŒ…, ì£¼ì‹ ê±°ëž˜, ì˜¨ë¼ì¸ ê²Œìž„

ðŸ“Œ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?
- âœ… ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì–‘ë°©í–¥ìœ¼ë¡œ ìžì£¼ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì•„ì•¼ í•  ë•Œ
- âœ… ì—°ê²°ì„ ìœ ì§€í•˜ë©´ì„œ ë¹ ë¥¸ ë°ì´í„° ì „ì†¡ì´ í•„ìš”í•  ë•Œ  


## SSE > NDJSON   

Vercel AI SDK ì—ì„œëŠ”  
- ì „í˜•ì ì¸ SSEì˜ event: message\ndata: ... í˜•ì‹ì´ ì•„ë‹ˆë¼   
- Newline-delimited JSON (NDJSON) í˜•ì‹ì„ ë”°ë¥´ëŠ” ì ì´ ì¤‘ìš”í•´ìš”.  

Next.jsì˜ ìŠ¤íŠ¸ë¦¬ë° ë Œë”ë§ ë°©ì‹
- Next.jsì—ì„œ ìŠ¤íŠ¸ë¦¬ë°ì„ ì§€ì›í•˜ëŠ” ì£¼ìš” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ì•„ìš”.
âœ… 1) React Server Components (RSC) ìŠ¤íŠ¸ë¦¬ë°  
âœ… 2) fetch() APIë¥¼ í†µí•œ ì„œë²„ ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë°  
âœ… 3) AI, LLM(ëŒ€í˜• ì–¸ì–´ ëª¨ë¸) ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë° (useStreamable ë“± í™œìš©)  


SSEì˜ í•œê³„
- 1.data:{}ë¼ëŠ” í˜•ì‹ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ íŽ˜ì´ë¡œë“œ ë° ê°€ê³µ ìžˆìŒ.  
- 2.Event Source API í•„ìš”í•˜ë©°, fetch í˜¸í™˜ì„± ì—†ìŒ  
  - IE, RN, Serverless ë¯¸ì§€ì›  
- 3.HTTP/1.1 ì „ìš©ì´ë¼ HTTP/2 ë¯¸ì§€ì›  
  - http/2 ê¸°ë°˜ì˜ ì„œë²„ëŠ” ì²˜ë¦¬ ë¶ˆê°€  


```js
import { createStreamableValue } from "ai";

async function fetchAIResponse() {
  const stream = createStreamableValue("");

  const response = await fetch("https://your-business-server.com/ai-stream");
  const reader = response.body?.getReader();
  const decoder = new TextDecoder();

  if (reader) {
    while (true) {
      const { done, value } = await reader.read();
      if (done) break;

      const text = decoder.decode(value, { stream: true });
      stream.update((prev) => prev + text);
    }
  }

  stream.done();
  return stream.value;
}
```